#!/usr/bin/with-contenv bashio
# ==============================================================================
# Script de vérification de santé pour LibreChat
# ==============================================================================

# Vérification de MongoDB
if ! mongosh --eval "db.runCommand('ping').ok" localhost:27017/test --quiet > /dev/null 2>&1; then
    bashio::log.error "MongoDB n'est pas accessible"
    exit 1
fi

# Vérification de LibreChat
if ! curl -sf http://127.0.0.1:3080/api/health > /dev/null 2>&1; then
    bashio::log.error "LibreChat n'est pas accessible"
    exit 1
fi

bashio::log.info "Tous les services sont opérationnels"
exit 0 